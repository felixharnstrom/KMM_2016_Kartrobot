\documentclass[a4paper,11pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[swedish]{babel}
\usepackage[top=1in,bottom=1in,left=1in,right=1in,headsep=.5in]{geometry}
\usepackage{hyperref}

\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\usepackage[yyyymmdd,hhmmss]{datetime}
\renewcommand{\dateseparator}{-}

\usepackage{mathptmx}% Times Roman font
\usepackage{helvet}% Helvetica, served as a model for arial
\usepackage{anyfontsize}

\usepackage[tocgraduated]{tocstyle}
\usetocstyle{allwithdot}

\usepackage[titletoc,title]{appendix}

\usepackage{fancyhdr}
\fancypagestyle{intro}{
    \fancyhf{}
    \fancyhead[C]{\LIPSprojekttitel}
    \fancyhead[R]{\today} 
    \fancyfoot[L]{\LIPSkursnamn \\ \LIPSdokumenttyp}
    \fancyfoot[C]{\phantom{text}\Roman{page}}
    \fancyfoot[R]{\LIPSprojektgrupp \\ \LIPSgruppepost} 
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0.4pt}}
\fancypagestyle{content}{
    \fancyhf{}
    \fancyhead[C]{\LIPSprojekttitel}
    \fancyhead[R]{\today} 
    \fancyfoot[L]{\LIPSkursnamn \\ \LIPSdokumenttyp}
    \fancyfoot[C]{\phantom{text}\thepage}
    \fancyfoot[R]{\LIPSprojektgrupp \\ \LIPSgruppepost} 
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0.4pt}}

\usepackage{titlesec}
\titleformat{\section}
    {\normalfont\sffamily\Large\bfseries}
    {\thesection}{1em}{}
\titleformat{\subsection}
    {\normalfont\sffamily\Large\bfseries}
    {\thesubsection}{1em}{}
\titleformat{\subsubsection}
    {\normalfont\sffamily\Large\bfseries}
    {\thesubsubsection}{1em}{}

\newcommand{\LIPSartaltermin}{2016/HT}
\newcommand{\LIPSkursnamn}{TSEA29}
\newcommand{\LIPSprojekttitel}{Kartrobot}
\newcommand{\LIPSprojektgrupp}{Grupp 1}
\newcommand{\LIPSgruppepost}{\href{mailto:kmm_2016_grupp1@liuonline.onmicrosoft.com}{{\small kmm\_2016\_grupp1@liuonline.onmicrosoft.com}}}
\newcommand{\LIPSgrupphemsida}{}
\newcommand{\LIPSkund}{ISY, Linköpings universitet, 581\,83 Linköping}
\newcommand{\LIPSkundkontakt}{Mattias Krysander, 013-282198, matkr@isy.liu.se}
\newcommand{\LIPSkursansvarig}{Tomas Svensson, 013-281368, Tomas.Svensson@liu.se}
\newcommand{\LIPShandledare}{}
\newcommand{\LIPSdokumenttyp}{Kravspecifikation}
\newcommand{\LIPSredaktor}{Felix Härnström}
\newcommand{\LIPSversion}{0.1}
\newcommand{\LIPSgranskare}{}
\newcommand{\LIPSgranskatdatum}{}
\newcommand{\LIPSgodkannare}{}
\newcommand{\LIPSgodkantdatum}{}

\input{LIPS.tex}
\begin{document}
\pagestyle{intro}
\LIPStitelsida
\clearpage
\begin{LIPSprojektidentitet}
    \LIPSgruppmedlem{Hannes Haglund}{}{hanha265@student.liu.se}
    \LIPSgruppmedlem{Felix Härnström}{Projektledare (PL)}{felha423@student.liu.se}
    \LIPSgruppmedlem{Jani Jokinen}{}{janjo273@student.liu.se}
    \LIPSgruppmedlem{Silas Lenz}{}{sille914@student.liu.se}
    \LIPSgruppmedlem{Daniel Månsson}{}{danma344@student.liu.se}
    \LIPSgruppmedlem{Emil Norberg}{Dokumentansvarig (DOK)}{emino969@student.liu.se}
\end{LIPSprojektidentitet}
\clearpage
\renewcommand{\familydefault}{\sfdefault}	%Sans-serif
\normalfont
\tableofcontents
\renewcommand{\familydefault}{\rmdefault}	%Back to serifs
\normalfont
\clearpage
\begin{LIPSdokumenthistorik}
    \LIPSversionsinfo{0.1}{2016-09-05}{Första utkastet}{FH}{FH}
\end{LIPSdokumenthistorik}
\clearpage
\setcounter{page}{1}
\pagestyle{content}
\section{Inledning}
% TODO: Figure
% TODO: Systemet i dess omgivning. 


I detta dokument kommer kravlistor formateras enligt figur \ref{fig:lipskrav_exempel}.
\begin{figure}[h!]
\begin{LIPSkravlista}
    \LIPSkravDemo{Förändring}{Kravtext för krav X}{Prioritet}
\end{LIPSkravlista}
\caption{Formatering för kravlista.}
\label{fig:lipskrav_exempel}
\end{figure}

Kravnummer i första kolumnen är formaterade löpande genom hela dokumentet. Andra kolumnen anger om det är ett originalkrav eller om kravet har reviderats. Den tredje kolumnen beskrivet kravet i text. Den fjärde kolumnen beskrivet kravets prioritet. Kravnivåerna är som följande:
\begin{itemize}
    \item Prioritetsnivå 1 – Kravet ska uppfyllas
    \item Prioritetsnivå 2 – Kravet ska uppfyllas om tid finns
    \item Prioritetsnivå 3 – Kravet ska uppfyllas efter att alla krav med nivå 2 uppfyllts 
\end{itemize}
\subsection{Parter}
Beställare: Mattias Krysander \\
Leverantör: \LIPSprojektgrupp \\
Handledare: xxx 

\subsection{Syfte och mål}
Att leverera en kartrobot som kan styras manuellt via Blåtand, samt autonomt kan navigera en bana, uppbyggd enligt bilaga A, och samtidigt rita upp en karta över området.  
\subsection{Användning}
Roboten ska ha två lägen, ett för manuell fjärrstyrning, och ett autonomt läge. Man ska kunna växla mellan dessa lägen med en brytare på roboten. Det ska även finnas en startknapp på roboten. 
\subsubsection{Manuell styrning}
Vid manuell styrning så ska roboten reagera på följande kommandon som skickas via Blåtand: fram, fram vänster, fram höger, back, stopp, rotera vänster, rotera höger. 
\subsubsection{Autonom styrning}
I det autonoma läget ska roboten utforska en bana som är uppbyggd enligt bilaga A. Den ska skicka data till en ansluten dator, som ritar upp en karta över området. Efter kartläggningen ska roboten returnera till startområdet. 
\subsection{Bakgrundsinformation}
\subsection{Definitioner}


\section{Översikt av systemet}

\subsection{Grov beskrivning av produkten}
Vår produkt är en robot som kan navigera genom en 6$ \times $6m bana och kartlägga hur banan ser ut. Roboten ska ha två olika lägen; ett då den styrs med hjälp av Bluetooth, ett annat då den är självkörande och kartlägger banan själv. Roboten ska även oavsett läge alltid skicka information angående sin status dvs data från sensorer, robotens läge etc. 

\subsection{Produktkomponenter}
Kartrobot med mjukvara till roboten samt för tillhörande dator, teknisk dokumentation, användarmanual, demonstration och en efterstudie. 

\subsection{Beroenden till andra system }
Beroenden till andra system 

\subsection{Ingående delsystem}
De moduler som ingår i konstruktionen är:
\begin{itemize}
    \item Sensorenhet (avläsning) 
    \item Styrenhet (styrning av motorer) 
    \item Kommunikations och kontrollenhet (Blåtand, beräkningar av rutt)  uppfyllts 
\end{itemize}

\subsection{Avgränsningar}
Behöver endast klara av banor utformade enligt bilaga A. 
% TODO: vill vi ha Designfilosofi?

\subsection{Generella krav på hela systemet}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Roboten ska kunna bestämma avstånd till väggar.}{1}
    \LIPSkrav{Original}{Roboten ska kunna förflytta sig.}{1}
    \LIPSkrav{Original}{Roboten ska kunna styras manuellt av användaren via ett trådlöst medium (t.ex. Bluetooth)}{1}
    \LIPSkrav{Original}{Roboten ska kunna styras autonomt.}{1}
    \LIPSkrav{Original}{Roboten ska ha en fysisk brytare med vilken man kan välja mellan autonom och manuell styrning. }{1}
    \LIPSkrav{Original}{Roboten ska ha en fysisk brytare med vilken man startar den.}{1}
    \LIPSkrav{Original}{Roboten ska kunna kommunicera trådlöst med en bärbar dator.}{1}
    \LIPSkrav{Original}{Roboten ska skicka kartdata till en bärbar dator.}{1}
    \LIPSkrav{Original}{Roboten ska skicka styrdata till en bärbar dator.}{1}
    \LIPSkrav{Original}{Roboten ska skicka sensordata till en bärbar dator.}{1}
    \LIPSkrav{Original}{Roboten ska vara uppbyggd av utbytbara moduler.}{1}
    \LIPSkrav{Original}{I konstruktionen ska det ingå: kommunikationsmodul, styrenhet, samt sensorenhet.}{1}
    \LIPSkrav{Original}{Roboten ska återvända till ursprungspositionen efter kartläggning.}{1}
    \LIPSkrav{Original}{Roboten ska uppfylla kraven i bilaga A.}{1}
    \LIPSkrav{Original}{Rummet som roboten kartlagt ska presenteras digitalt.}{1}
    \LIPSkrav{Original}{Den diagnostiska datan från roboten ska presenteras digitalt på den bärbara datorn.}{1}
    \LIPSkrav{Original}{Roboten ska kunna kartlägga ett rum som specificerat i bilaga A.}{1}
\end{LIPSkravlista}


\section{Delsystem 1 - Sensorenhet}
%TODO: Bild av delsystem


\subsection{Inledande beskrivning av delsystem 1}
Sensorenheten behandlar data från olika sensorer, för att sedan föra den vidare på ett läsligt format till styrenheten, delsystem 3.\\
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Det ska sitta sensorer på robotens sidor för kollisionsdetektering.}{2} %TODO: 2?
    \LIPSkrav{Original}{1 sensor ska sitta på toppen av roboten för avläsning av rummet. Denna sensor ska rotera för att avläsa hela omgivningen}{1}
    \LIPSkrav{Original}{}{1}
    \LIPSkrav{Original}{1 sensor ska användas för kalibrering av graderna på den sensor som roterar för avläsning av rummet.}{2}
    \LIPSkrav{Original}{Roboten ska vara utrustad med ett gyro som håller reda på vilken riktning som roboten pekar.}{1}
\end{LIPSkravlista}

\subsection{Gränssnitt}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Sensoreneheten ska ta emot data från robotens sensorer}{1}
    \LIPSkrav{Original}{Sensorenheten ska, efter eventuell kalibrering, skicka vidare processerad sensordata till kontrolleneheten}{1}
    \LIPSkrav{Original}{Sensorenheten ska indikera vilken sensor informationen kommer från.}{1}
\end{LIPSkravlista}

\subsection{Designkrav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Sensorenheten ska arbeta med sex stycken avståndssensorer.}{1}
    \LIPSkrav{Original}{Sensorenheten ska vara skriven i C/C++.}{1}
    \LIPSkrav{Original}{Sensorenheten ska innehålla minst en processor.}{1}
\end{LIPSkravlista}

\subsection{Funktionella krav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Enheten ska leverera data enligt givet protokoll.}{1}
    \LIPSkrav{Original}{Sensorenheten ska ta emot sensordata från sensorerna xxx}{1}
\end{LIPSkravlista}

\section{Delsystem 2 - Styrenhet}
%TODO: Bild av delsystem

\subsection{Inledande beskrivning av delsystem 2}
Styrenheten är ansvarig för all logik och funktionalitet av robotens styrning. Styrenheten är länken mellan alla styrkommandon och motorerna, dvs att den ingående data måste följa ett givet protokoll. Den enda enhet som styrenhet kommunicerar med är kommunikations enheten.
% TODO: Ingen kravlista?

\subsection{Gränssnitt}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Styrenheten ska styra alla motorer i konstruktionen.}{1}
    \LIPSkrav{Original}{Enheten ska kunna ta emot instruktioner på ett väldefinierat format via en gemensam buss.}{1}
    \LIPSkrav{Original}{Styrenheten ska kunna översätta högnivåinstruktioner som exempelvis "hastighet n rakt fram" och "sväng 10 grader åt höger" till motorsignaler.}{2}
    \LIPSkrav{Original}{När styrenheten översätter högnivåinstruktioner till motorsignaler ska dessa rapporteras tillbaka via en enskild buss.}{2}
\end{LIPSkravlista}

\subsection{Designkrav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Styrenheten ska arbeta med servmotorerna xxx}{1}
    \LIPSkrav{Original}{Styrenheten ska vara skriven i C/C++.}{1}
    \LIPSkrav{Original}{Styrenheten ska innehålla minst en processor.}{1}
\end{LIPSkravlista}

\subsection{Funktionella krav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Enheten ska ta emot data enligt givet protokoll.}{1}
    \LIPSkrav{Original}{Enheten ska styra servmotorerna xxx}{1}
\end{LIPSkravlista}

\section{Delsystem 3 - Kommunikations och kontrollenhet }
%TODO: Bild av delsystem

\subsection{Inledande beskrivning av delsystem 3}
Kommunikationsenheten kommunicerar med modulerna på själva roboten, och med PCn. I samma hårdvarumodul ingår också kontrollenheten, som gör beräkningar relaterat tilll det autonoma läget.

\subsection{Gränssnitt}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Tar emot data via en buss från sensorenheten.}{1}
    \LIPSkrav{Original}{Skicka vidare motorinstruktioner till styrenheten via dess gemensamma buss.}{1}
    \LIPSkrav{Original}{Enheten tar emot information om motorernas utstyrning från styrenheten, när denne själv avgjort detta.}{2}
    \LIPSkrav{Original}{Kommunikationsenheten ska ta emot kommandon från PC-mjukvaran via Bluetooth.}{1}
    \LIPSkrav{Original}{Enheten skickar sensor och motordata till PCn via Bluetooh.}{1}
\end{LIPSkravlista}

\subsection{Designkrav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
\end{LIPSkravlista}

\subsection{Funktionella krav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
    \LIPSkrav{Original}{arg2}{1}
\end{LIPSkravlista}


\section{Delsystem 4 - Mjukvara på PC}
%TODO: Bild av delsystem

\subsection{Inledande beskrivning av delsystem 4}
För att den manuella navigeringen ska fungera måste den dator som skickar kommandon över Bluetooth ha mjukvara som stödjer detta. Mjukvaran ska inte bara förbereda dina kommandon för ett lämpligt protokoll men även sända kommandot över Bluetooth. 

\subsection{Gränssnitt}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Mjukvaran ska skicka kommandon för navigering som roboten kan avläsa och utföra.}{1}
    \LIPSkrav{Original}{Kommandon för navigering ska skickas över Bluetooth.}{1}
    \LIPSkrav{Original}{Sensorernas värden och robotens status ska skickas tas emot över Bluetooth och presenteras för navigeraren.}{1}
    \LIPSkrav{Original}{Den karta som är genererad av roboten ska kunna ritas ut i denna mjukvara.}{1}
\end{LIPSkravlista}

\subsection{Designkrav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Mjukvaran ska kommunicera med roboten över Bluetooth.}{1}
    \LIPSkrav{Original}{Datan för att hämta karta samt skicka kommandon sker över samma protokoll.}{2}
\end{LIPSkravlista}

\subsection{Funktionella krav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Mjukvaran ska rita ut kartan som en tydlig grid, med bara raka linjer och 90 graders kanter.}{2}
    \LIPSkrav{Original}{Robotens och sensorernas status samt den hittils genererade kartan presenteras uppdateras kontinuerligt i mjukvaran.}{2}
\end{LIPSkravlista}

\section{Prestandakrav}
\begin{LIPSkravlista}
    \LIPSkrav{Original}{Roboten ska kunna kartlägga ett rum som specificerat i bilaga A på under 20 minuter}{1}
    \LIPSkrav{Original}{Roboten ska kunna skanna rummet medan den rör sig, det vill säga den behöver inte stanna för att söka efter väggar omkring sig.}{2}
\end{LIPSkravlista}


\section{Krav på vidareutveckling}


\section{Tillförlitlighet}


\section{Ekonomi}

\begin{LIPSkravlista}
    \LIPSkrav{Original}{Gruppen ska ha arbetat sammanlagt maximalt 960 timmar vid leverans.}{1}
\end{LIPSkravlista}

\section{Leveranskrav och delleveranser}
\begin{LIPSleveranslista}
    \LIPSleverans{Original}{Kravspecifikation}{2016-09-13}{1}
    \LIPSleverans{Original}{Första versionen av projektplan, tidplan och systemskiss}{2016-09-23}{1}
    \LIPSleverans{Original}{Slutgiltig version av projektplan, tidplan och systemskiss}{2016-09-29}{1}
    \LIPSleverans{Original}{Första versionen av designspecifikationen}{2016-11-01}{1}
    \LIPSleverans{Original}{Slutgiltig version av designspecifikation}{2016-11-04}{1}
    \LIPSleverans{Original}{Teknisk dokumentation och användarhandledning}{3 arbetsdagar före redovisning}{1}
    \LIPSleverans{Original}{Verifiering av kraven (BP5).}{Senast dagen innan redovisning}{1}
    \LIPSleverans{Original}{Redovisning och demonstration}{Vecka 51}{1}
    \LIPSleverans{Original}{Slutpresentation}{2016-12-19}{1}
    \LIPSleverans{Original}{Tävlingsdeltagande}{2016-12-20}{1}
    \LIPSleverans{Original}{Efterstudie samt inlämning av källkod}{2016-12-21}{1}
    \LIPSleverans{Original}{Tidrapporter}{31/10, 7/11, 14/11, 21/11, 28/11, 5/12, 12/12, 19/12}{1}
\end{LIPSleveranslista}

\section{Dokumentation}
\begin{LIPSdokumentlista}
    \LIPSdokument{Teknisk dokumentation}{SV}{Beskrivning av konstruktionen för framtida underhåll, felsökning och konstruktionsunderlag}{Ingenjörer}{PDF}
    \LIPSdokument{Användarhandledning}{SV}{Beskrivning av hur produkten installeras och används}{Användare}{Wiki}
\end{LIPSdokumentlista}

\clearpage

\begin{appendices}
\section{Banspecifikation}
%TODO Copy from drive doc
\end{appendices}


\end{document}